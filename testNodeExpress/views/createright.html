<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title>Project X</title>
    <!--   <link rel='stylesheet prefetch' href='http://cdnjs.cloudflare.com/ajax/libs/semantic-ui/0.16.1/css/semantic.min.css' />
    <link rel='stylesheet prefetch' href='https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.1.8/components/transition.min.css' />
    
    <link rel="stylesheet" href=".\stylesheets\components\button.css" />
    <link rel="stylesheet" href=".\stylesheets\components\list.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.0.0-alpha1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.1.8/semantic.min.js"></script>-->

    <link href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.1.8/semantic.min.css" rel="stylesheet" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.1.8/semantic.min.js"></script>
    <link rel="stylesheet" href=".\stylesheets\main.css" />
    <script src="socket.io/socket.io.js"></script>


    <script>

        //function dropdownSelection(value) {
        //    console.log("drop down name selected " + document.getElementById("DDclass").innerText);
        //    document.getElementById("DDclass").innerText = value.innerText;
        //};

        //function pulseicon() {
        //    console.log("pulse icon");
        //    document.getElementById("gobackicon").setAttribute("style:color", "red");
        //};

        function rightnamechange() {
            console.log("rightnamechange clicked");
            document.getElementById("createRightButton").removeAttribute("disabled");
        };

        function createRight() {
            var socket = io.connect();
            socket.emit('createRight', { data: 'You clicked the create button' });
            console.log("create button clicked");
        };

        function logout() {
            var socket = io.connect();
            socket.emit('logout', { data: 'You clicked the logout button' });
            console.log("logout button clicked");
        };

        function enableID(value) {
            console.log(value);
            if (value == 'DDclass') {
                var currentClass = document.getElementById("DDclass").getAttribute('class');
                if (currentClass == "ui selection dropdown") {
                    document.getElementById("DDclass").setAttribute('class', 'ui disabled selection dropdown');
                } else if (currentClass == "ui disabled selection dropdown") {
                    document.getElementById("DDclass").setAttribute('class', 'ui selection dropdown');
                }
            } else {
                if (document.getElementById(value).getAttribute('disabled') == null) {
                    document.getElementById(value).setAttribute('disabled', 'disabled');
                    console.log(' --- 1');
                } else if (document.getElementById(value).getAttribute('disabled').toString() == 'disabled') {
                    document.getElementById(value).removeAttribute('disabled');
                    console.log(' --- 2');
                }
            }
        };
    </script>

</head>
     
<body>
    <script>
        window.onload = function () {
            console.log("onload called : " + sessionStorage.getItem("name"));
            document.getElementById("hLoggedInAs").innerHTML = "<h1 class=\"ui right aligned header\" style=\"color: white\">Welcome " + sessionStorage.getItem("name") + "</h1>";
            document.getElementById("pagetitle").innerText = "Right Types : " + sessionStorage.getItem("servicename");
            if (sessionStorage.getItem("right") != '') {
                document.getElementById("righttext").innerText = sessionStorage.getItem("right");
                document.getElementById("createRightButton").removeAttribute("disabled");
                document.getElementById("createRightButton").innerText = "Amend";
            } else {
                document.getElementById("createRightButton").setAttribute("disabled", "disabled");
                document.getElementById("createRightButton").innerText = "Create";
            }
        };

        var socket = io.connect();

        socket.on('timesignal', function (data) {
            // console.log(data.data);
            document.getElementById("servertime").innerHTML = '<i class="calendar icon"></i>' + data.data;
        });

        socket.on('message', function (data) {
            console.log(data.message);
            //document.getElementById("Text1").value = data.message;
        });
        socket.on('dd_data', function (data) {
            console.log("dd_data in browser called with ...");
            console.log(data.data);
            //document.getElementById("Text2").value = data.data;
        });

        socket.on('logoutRet', function (data) {
            console.log("logout in browser called ...");
            window.location("/");
        });

        socket.on('createRightRet', function (data) {
            console.log("Create right in browser called ...");
            window.location("createservice");
            //alert("Right created");
        });


        function goBack() {
            window.history.back();
        };

        $(function () {
            $('.ui.dropdown').dropdown();
        });

        $('.ui.checkbox')
            .checkbox();

    </script>

    <div class="ui equal width middle aligned padded grid">

        <div class="grey row">
            <div class="column">
                <img class="ui small image" style="border-radius: 5%" src="images/logo.png" />
            </div>
            <div class="column">
                <h1 class="ui left aligned header" id="pagetitle" style="color: white">Right Types</h1>
            </div>
            <div class="column"></div>
            <!--<div class="column"></div>-->
            <div class="column" id="hLoggedInAs">
                <h1 class="ui right aligned header" style="color: white">Welcome</h1>
            </div>

            <div class="column">
                <div class="ui right aligned dropdown">
                    <img class="ui tiny avatar image" src="images/avatars/debbie.jpg" />
                    <i class="dropdown icon"></i>
                    <div class="menu">
                        <div class="item" onclick="logout()">
                            <i class="sign out icon"></i>
                            Logout
                        </div>
                    </div>
                </div>
            </div>
            <div class="right aligned column">
                <i class="arrow circle left huge icon" id="gobackicon" style="cursor: pointer;" onclick="goBack()"></i>
            </div>
        </div>
    </div>
    <div id="servertime" class="flex-date-header"><i class="calendar icon"></i>April 5, 2017</div>

    <div class="ui hidden divider"></div>

    <div class="ui padded grid" style="padding-top: 7%; padding-left: 20%; padding-right: 20%">
        <div class="ui right aligned column">
            <div class="flex-containerredtitle">
                <div class="flex-container5">
                    <h3>Right Type Specification</h3>
                </div>
                <div class="flex-container3" style="height: 220px; padding-top: 0px">
                    <div class="ui form" style="width: inherit; justify-content: center">
                        <div class="inline fields">
                            <div class="field">
                                <div class="ui labeled input" style="position: absolute; left: 0px; top: 0px;">
                                    <div class="ui label">
                                        Right Type
                                    </div>
                                    <input type="text" id="righttext" placeholder="" onchange="rightnamechange()" />
                                </div>
                            </div>
                            <div class="four wide field">

                                <div class="ui disabled selection dropdown" id="DDclass" style="position: absolute; left: 300px; top: 0px; width: 200px; height: 30px">
                                    <input name="" type="hidden"/>
                                    <i class="dropdown icon"></i>
                                    <div class="default text">ID Verification</div>
                                    <div class="menu">
                                        <div class="item" data-value="0">Belgian Identity Service</div>
                                        <div class="item" data-value="1">Finnish Identity Service</div>
                                        <div class="item" data-value="3">UK Identity Service</div>
                                    </div>
                                </div>
                            </div>
                            <div class="three wide field">
                                <div class="ui toggle checkbox" style="position: absolute; left: 530px; top: 11px;">
                                    <input type="checkbox" onclick="enableID('DDclass')" />
                                    <label>ID</label>
                                </div>
                            </div>
                            <div class="three wide field">
                                <div class="ui toggle checkbox" style="position: absolute; left: 650px; top: 11px;">
                                    <input name="example" type="checkbox" />
                                    <label>Divisibility</label>
                                </div>
                            </div>

                        </div>
                        <div class="inline fields">
                            <div class="six wide field">
                                <div class="ui labeled input" style="position: absolute; left: 0px; top: 65px; width: 200px">
                                    <div class="ui label">
                                        Value Limit
                                    </div>
                                    <input type="text" id="valuelimittext" placeholder="" disabled="disabled" />
                                </div>
                            </div>

                            <div class="three wide field">
                                <div class="ui toggle checkbox" style="position: absolute; left: 230px; top: 76px;">
                                    <input name="valuelimitcb" type="checkbox" onchange="enableID('valuelimittext')" />
                                    <label></label>
                                </div>
                            </div>

                            <div class="three wide field" style="position: absolute; left: 530px; top: 76px;">
                                <div class="ui toggle checkbox">
                                    <input name="example" type="checkbox" onchange="enableID('timelimit')" />
                                    <label>Time Limit</label>
                                </div>
                            </div>
                            <div class="field">
                                <input type="date" id="timelimit" disabled="disabled" style="position: absolute; left: 300px; top: 65px; width: 180px; height: 38px" />
                            </div>
                            <div class="three wide field">
                                <div class="ui toggle checkbox" style="position: absolute; left: 650px; top: 76px;">
                                    <input name="example" type="checkbox" />
                                    <label>Tax</label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="ui hidden divider"></div>
            <button class="ui button" id="createRightButton" type="button" onclick="createRight()" disabled="disabled">Create</button>
        </div>
    </div>


</body>
</html>
